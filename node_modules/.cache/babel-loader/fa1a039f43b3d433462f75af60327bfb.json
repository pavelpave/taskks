{"ast":null,"code":"var log = require('./log')('[perf]'),\n    client = require('./client');\n\nmodule.exports = function perf(fn, msg, say) {\n  return function () {\n    /* istanbul ignore next */\n    var start = client ? performance.now() : process.hrtime(),\n        retval = fn.apply(this, arguments);\n    retval instanceof Promise ? retval.then(function () {\n      report(start);\n    }) : report(start);\n    return retval;\n  };\n\n  function report(start) {\n    var diff = client ? performance.now() - start : process.hrtime(start);\n    if (!client) diff = diff[0] * 1e3 + diff[1] / 1e6;\n    diff = Math.round(diff * 100) / 100;\n    (say || log)(msg || fn.name, diff, 'ms');\n  }\n};","map":null,"metadata":{},"sourceType":"script"}