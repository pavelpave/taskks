{"ast":null,"code":"var is = require('./is'),\n    to = require('./to'),\n    key = require('./key'),\n    owner = require('./owner'),\n    split = require('./split'),\n    client = require('./client'),\n    identity = require('./identity'),\n    DEBUG = strip((client ? (owner.location.search.match(/debug=(.*?)(&|$)/) || [])[1] : key('process.env.DEBUG')(owner)) || ''),\n    whitelist = DEBUG.split(',').map(split('/'));\n\nmodule.exports = function deb(ns) {\n  return DEBUG == '*' || whitelist.some(matches(ns)) ? out : identity;\n\n  function out(d) {\n    if (!owner.console || !console.log.apply) return d;\n    is.arr(arguments[2]) && (arguments[2] = arguments[2].length);\n    var args = to.arr(arguments),\n        prefix = '[deb][' + new Date().toISOString() + ']' + ns;\n    args.unshift(prefix.grey ? prefix.grey : prefix);\n    return console.log.apply(console, args), d;\n  }\n};\n\nfunction matches(ns) {\n  ns = strip(ns).split('/');\n  return function (arr) {\n    return arr.length == 1 ? arr[0] == ns[0] : arr.length == 2 ? arr[0] == ns[0] && arr[1] == ns[1] : false;\n  };\n}\n\nfunction strip(str) {\n  return str.replace(/(\\[|\\])/g, '');\n}","map":null,"metadata":{},"sourceType":"script"}